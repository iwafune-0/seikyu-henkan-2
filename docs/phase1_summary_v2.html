<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 1 完了報告 - 月次処理自動化システム（初心者向け版）</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            line-height: 1.9;
            color: #2c3e50;
            background: linear-gradient(135deg, #6dd5ed 0%, #2193b0 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 50px 60px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            border-radius: 15px;
        }

        .header {
            text-align: center;
            padding-bottom: 40px;
            border-bottom: 4px solid #3498db;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            color: #2980b9;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .header .status {
            font-size: 1.6em;
            color: #27ae60;
            font-weight: bold;
        }

        .header .date {
            color: #7f8c8d;
            margin-top: 15px;
            font-size: 1.1em;
        }

        h2 {
            font-size: 2em;
            color: #2980b9;
            margin-top: 50px;
            margin-bottom: 25px;
            padding-left: 20px;
            border-left: 6px solid #3498db;
        }

        h3 {
            font-size: 1.6em;
            color: #34495e;
            margin-top: 35px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #bdc3c7;
        }

        h4 {
            font-size: 1.3em;
            color: #555;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .summary-box {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            padding: 35px;
            border-radius: 12px;
            margin: 30px 0;
            border-left: 6px solid #27ae60;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.1);
        }

        .summary-box h3 {
            border: none;
            margin-top: 0;
            color: #27ae60;
        }

        .summary-box p {
            font-size: 1.1em;
            margin: 10px 0;
        }

        .term-explain {
            font-size: 0.85em;
            color: #7f8c8d;
            font-weight: normal;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border-radius: 10px;
            overflow: hidden;
        }

        th {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 1.05em;
        }

        td {
            padding: 16px 15px;
            border-bottom: 1px solid #ecf0f1;
        }

        tr:hover {
            background: #f8f9fa;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .completed {
            background: #e8f8f5;
        }

        .completed td {
            color: #27ae60;
            font-weight: 600;
        }

        .step-list {
            background: #f8f9fa;
            padding: 25px 35px;
            border-radius: 10px;
            margin: 25px 0;
            border: 2px solid #e9ecef;
        }

        .step-list li {
            margin: 15px 0;
            padding-left: 10px;
            line-height: 1.8;
        }

        .step-list ol li {
            font-size: 1.05em;
        }

        .deliverable-card {
            background: white;
            border: 3px solid #3498db;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .deliverable-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.25);
        }

        .deliverable-card h4 {
            color: #2980b9;
            margin-top: 0;
            margin-bottom: 12px;
            font-size: 1.3em;
        }

        .deliverable-card p {
            color: #555;
            margin: 8px 0;
            font-size: 1.05em;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .tech-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #2196f3;
            box-shadow: 0 3px 10px rgba(33, 150, 243, 0.1);
        }

        .tech-card h4 {
            color: #1976d2;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .tech-card ul {
            margin-left: 25px;
        }

        .tech-card li {
            margin: 10px 0;
            color: #424242;
            font-size: 1.05em;
        }

        .timeline {
            position: relative;
            padding-left: 50px;
            margin: 35px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, #3498db, #27ae60);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 35px;
        }

        .timeline-item::before {
            content: '✓';
            position: absolute;
            left: -38px;
            top: 5px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #27ae60;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
        }

        .timeline-item h4 {
            margin-top: 0;
            color: #2980b9;
            font-size: 1.25em;
        }

        .timeline-item p {
            color: #555;
            font-size: 1.05em;
            line-height: 1.7;
        }

        .cost-highlight {
            text-align: center;
            font-size: 3.5em;
            color: #27ae60;
            font-weight: bold;
            margin: 40px 0;
            padding: 40px;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-radius: 15px;
            border: 3px solid #28a745;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.2);
        }

        .cost-highlight .sub-text {
            font-size: 0.35em;
            color: #555;
            margin-top: 15px;
            font-weight: normal;
        }

        .next-action {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 35px;
            border-radius: 12px;
            margin-top: 50px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.3);
        }

        .next-action h3 {
            color: white;
            border: none;
            margin: 0 0 18px 0;
        }

        .next-action p {
            font-size: 1.2em;
            line-height: 1.8;
        }

        ul {
            margin-left: 35px;
        }

        li {
            margin: 12px 0;
            line-height: 1.7;
        }

        strong {
            color: #2c3e50;
            font-weight: 600;
        }

        .info-box {
            background: #e8f5e9;
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            color: #555;
            font-size: 1.05em;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                padding: 20px;
            }

            .deliverable-card:hover,
            .timeline-item:hover {
                transform: none;
                box-shadow: none;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.5em;
            }

            .tech-stack {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📋 Phase 1: 要件定義 完了報告</h1>
            <div class="status">✅ 完了</div>
            <div class="date">作業日: 2025-10-07 | 所要時間: 6時間</div>
        </div>

        <div class="summary-box">
            <h3>🎯 Phase 1 サマリー</h3>
            <p><strong>プロジェクト名:</strong> 月次処理自動化システム</p>
            <p><strong>目的:</strong> 毎月の請求書処理業務（PDF→Excel編集→PDF生成）を自動化し、作業時間を90%削減する</p>
            <p><strong>完了したステップ:</strong> 10/10 ステップ</p>
            <p><strong>進捗率:</strong> Phase <span class="term-explain">（プロジェクトの段階）</span> 1完了（プロジェクト全体の10%）</p>
        </div>

        <h2>📦 成果物（5つのファイル）</h2>

        <div class="deliverable-card">
            <h4>1. 📄 docs/requirements.md</h4>
            <p><strong>内容:</strong> 完全な要件定義書（Markdown <span class="term-explain">（シンプルな文章フォーマット）</span> 版）</p>
            <p><strong>行数:</strong> 612行</p>
            <p><strong>セクション:</strong> 10章構成（プロジェクト概要、成果定義、システム要件、機能要件、非機能要件、技術スタック <span class="term-explain">（使用する技術の組み合わせ）</span>、データベース設計、外部サービス、セキュリティ、開発環境）</p>
            <p style="margin-top: 10px; color: #7f8c8d;"><em>→ システムの全体像を文章でまとめた「マニュアル」です</em></p>
        </div>

        <div class="deliverable-card">
            <h4>2. 🌐 docs/requirements.html</h4>
            <p><strong>内容:</strong> HTML <span class="term-explain">（ブラウザで表示する形式）</span> 版要件定義書</p>
            <p><strong>特徴:</strong> 目次リンク、カラーコーディング、印刷対応</p>
            <p style="margin-top: 10px; color: #7f8c8d;"><em>→ 上記のMarkdown版を、ブラウザで綺麗に見られる形に変換したものです</em></p>
        </div>

        <div class="deliverable-card">
            <h4>3. 📊 docs/requirements_progress.md</h4>
            <p><strong>内容:</strong> 要件定義の進捗記録</p>
            <p><strong>記載内容:</strong> Step#1〜10の詳細な決定事項、議論の履歴</p>
            <p style="margin-top: 10px; color: #7f8c8d;"><em>→ 「どんな話し合いをして、何を決めたか」の記録です</em></p>
        </div>

        <div class="deliverable-card">
            <h4>4. 📈 docs/SCOPE_PROGRESS.md</h4>
            <p><strong>内容:</strong> 開発進捗管理表</p>
            <p><strong>記載内容:</strong> Phase 1-10の進捗状況、全8ページの管理表、実装優先順位</p>
            <p style="margin-top: 10px; color: #7f8c8d;"><em>→ プロジェクトの「進行状況チェックリスト」です</em></p>
        </div>

        <div class="deliverable-card">
            <h4>5. ⚙️ CLAUDE.md</h4>
            <p><strong>内容:</strong> 開発ルール設定ファイル</p>
            <p><strong>記載内容:</strong> エンジニアリング姿勢、型定義同期ルール <span class="term-explain">（フロントとバックで型を統一するルール）</span>、コーディング規約 <span class="term-explain">（コードの書き方のルール）</span>、テストポリシー <span class="term-explain">（テストの方針）</span>、セキュリティガイドライン</p>
            <p style="margin-top: 10px; color: #7f8c8d;"><em>→ 開発を進める上での「ルールブック」です</em></p>
        </div>

        <h2>✅ 完了した10ステップ</h2>

        <div class="timeline">
            <div class="timeline-item">
                <h4>Step#1: 成果定義の確定</h4>
                <p>システムの目的と成功指標（定量・定性）を定義しました。<br>
                <em style="color: #7f8c8d;">→ 「何を作るか」「どうなったら成功か」を明確にしました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#2: 実現可能性調査（技術的検証）</h4>
                <p>PDF解析 <span class="term-explain">（PDFから情報を読み取る処理）</span>、Excel編集 <span class="term-explain">（プログラムでExcelを自動更新）</span>、認証機能 <span class="term-explain">（ログイン機能）</span> の技術検証を完了しました。<br>
                <em style="color: #7f8c8d;">→ 「本当に作れるか」を確認しました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#3: 認証・権限設計</h4>
                <p>招待制認証、2つのロール <span class="term-explain">（役割・権限）</span>（管理者・一般ユーザー）を設計しました。<br>
                <em style="color: #7f8c8d;">→ 「誰がログインできて、誰が何をできるか」を決めました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#4: 必要なページリスト作成</h4>
                <p>全8ページ（認証3 + メイン5）の詳細を確定しました。<br>
                <em style="color: #7f8c8d;">→ システムの「画面構成」を決めました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#5: 技術スタック最終決定</h4>
                <p>React 18 <span class="term-explain">（画面を作る人気の技術）</span> + Node.js 20 <span class="term-explain">（サーバー側の処理を作る技術）</span> + Python 3.11 <span class="term-explain">（データ処理に強い言語）</span> + Supabase <span class="term-explain">（データベースとログイン機能のサービス）</span> + AWS <span class="term-explain">（Amazonのクラウドサービス）</span> 構成を確定しました。<br>
                <em style="color: #7f8c8d;">→ 「どんな技術を使うか」を決めました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#6: 外部API <span class="term-explain">（外部サービスの機能を借りる仕組み）</span> 最終決定</h4>
                <p>Supabase、AWS Amplify <span class="term-explain">（ウェブサイトを簡単に公開できるサービス）</span>、AWS Lambda <span class="term-explain">（サーバーなしでプログラムを実行できるサービス）</span> の3つのサービスを選定しました。<br>
                <em style="color: #7f8c8d;">→ 「どの外部サービスを使うか」を決めました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#7: 要件定義書の書き出し</h4>
                <p>requirements.md（612行）とHTML版を生成しました。<br>
                <em style="color: #7f8c8d;">→ これまでの決定事項を文書にまとめました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#8: SCOPE_PROGRESS進捗表挿入</h4>
                <p>開発進捗管理表とページ管理表を作成しました。<br>
                <em style="color: #7f8c8d;">→ 今後の開発スケジュールを整理しました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#9: CLAUDE.md生成</h4>
                <p>Phase 2以降の開発ルール設定ファイルを生成しました。<br>
                <em style="color: #7f8c8d;">→ 開発を進める際の「ルール」を決めました</em></p>
            </div>

            <div class="timeline-item">
                <h4>Step#10: ページの深掘り</h4>
                <p>深掘り不要と判断（実装時に調整可能な詳細度）しました。<br>
                <em style="color: #7f8c8d;">→ 細かい部分は実装しながら決めていくことにしました</em></p>
            </div>
        </div>

        <h2>🎯 確定した仕様</h2>

        <h3>システム概要</h3>
        <table>
            <tr>
                <th>項目</th>
                <th>内容</th>
            </tr>
            <tr>
                <td><strong>システム名</strong></td>
                <td>月次処理自動化システム</td>
            </tr>
            <tr>
                <td><strong>目的</strong></td>
                <td>毎月25日～翌月5日の請求書処理業務を自動化（作業時間を90%削減）</td>
            </tr>
            <tr>
                <td><strong>対象取引先</strong></td>
                <td>ネクストビッツ様、オフビートワークス様（将来、他の取引先も追加可能）</td>
            </tr>
            <tr>
                <td><strong>ページ数</strong></td>
                <td>全8ページ（認証関連3ページ + メイン機能5ページ）</td>
            </tr>
            <tr>
                <td><strong>ユーザーロール</strong></td>
                <td>管理者、一般ユーザーの2種類</td>
            </tr>
        </table>

        <h3>ページ構成</h3>

        <h4>認証関連ページ（3ページ）</h4>
        <table>
            <tr>
                <th>ページID</th>
                <th>ページ名</th>
                <th>誰が使える？</th>
            </tr>
            <tr>
                <td>P-001a</td>
                <td>ログインページ</td>
                <td>誰でも（未ログイン状態）</td>
            </tr>
            <tr>
                <td>P-001b</td>
                <td>招待受諾・パスワード設定ページ</td>
                <td>招待メールを受け取った人</td>
            </tr>
            <tr>
                <td>P-001c</td>
                <td>パスワードリセットページ</td>
                <td>パスワードを忘れた人</td>
            </tr>
        </table>

        <h4>メイン機能ページ（5ページ）</h4>
        <table>
            <tr>
                <th>ページID</th>
                <th>ページ名</th>
                <th>誰が使える？</th>
                <th>主な機能</th>
            </tr>
            <tr>
                <td>P-002</td>
                <td>PDF処理実行ページ</td>
                <td>全ユーザー</td>
                <td>4つのPDFをアップロード→Excel編集→新しいPDFを生成</td>
            </tr>
            <tr>
                <td>P-003</td>
                <td>処理履歴・ダウンロードページ</td>
                <td>全ユーザー</td>
                <td>過去に処理したファイルを再度ダウンロード</td>
            </tr>
            <tr>
                <td>P-004</td>
                <td>ユーザー管理ページ</td>
                <td>管理者のみ</td>
                <td>新しいユーザーを招待・削除・権限変更</td>
            </tr>
            <tr>
                <td>P-005</td>
                <td>取引先設定ページ</td>
                <td>管理者のみ</td>
                <td>テンプレート <span class="term-explain">（ひな形）</span> Excelの管理・処理ルールの表示</td>
            </tr>
        </table>

        <h3>技術スタック</h3>

        <div class="tech-stack">
            <div class="tech-card">
                <h4>フロントエンド <span class="term-explain">（画面表示の部分）</span></h4>
                <ul>
                    <li><strong>React 18</strong> <span class="term-explain">- 画面を作る人気の技術</span></li>
                    <li><strong>TypeScript 5.x</strong> <span class="term-explain">- JavaScriptを改良した言語、バグを減らせる</span></li>
                    <li><strong>Vite 5.x</strong> <span class="term-explain">- 開発を速くするツール</span></li>
                    <li><strong>Tailwind CSS 3.x</strong> <span class="term-explain">- デザインを簡単に作れるツール</span></li>
                    <li><strong>shadcn/ui</strong> <span class="term-explain">- ボタンや入力欄などの綺麗な部品集</span></li>
                    <li><strong>Zustand</strong> <span class="term-explain">- ログイン状態などのデータを管理するツール</span></li>
                </ul>
            </div>

            <div class="tech-card">
                <h4>バックエンド <span class="term-explain">（裏側の処理部分）</span></h4>
                <ul>
                    <li><strong>Node.js 20 + Express</strong> <span class="term-explain">- サーバー側の処理を作る技術</span></li>
                    <li><strong>Python 3.11</strong> <span class="term-explain">- データ処理に強い言語</span></li>
                    <li><strong>pdfplumber</strong> <span class="term-explain">- PDFの中身を読み取るツール</span></li>
                    <li><strong>openpyxl</strong> <span class="term-explain">- Excelファイルを編集するツール</span></li>
                    <li><strong>LibreOffice</strong> <span class="term-explain">- ExcelからPDFを作る無料ソフト</span></li>
                </ul>
            </div>

            <div class="tech-card">
                <h4>データベース <span class="term-explain">（データ保管の部分）</span></h4>
                <ul>
                    <li><strong>PostgreSQL 15</strong> <span class="term-explain">- 大量データを安全に保管できる人気のデータベース</span></li>
                    <li><strong>Supabase</strong> <span class="term-explain">- PostgreSQLを簡単に使えるサービス</span></li>
                    <li><strong>Supabase Auth</strong> <span class="term-explain">- Supabaseのログイン機能</span></li>
                    <li><strong>Row Level Security</strong> <span class="term-explain">- ユーザーごとに見られるデータを制限する機能</span></li>
                </ul>
            </div>

            <div class="tech-card">
                <h4>デプロイ <span class="term-explain">（インターネットに公開）</span></h4>
                <ul>
                    <li><strong>AWS Amplify</strong> <span class="term-explain">- 画面部分を簡単に公開できるサービス</span></li>
                    <li><strong>AWS Lambda Docker</strong> <span class="term-explain">- サーバー管理不要でプログラムを実行できるサービス</span></li>
                    <li><strong>Supabase</strong> <span class="term-explain">- データベースをそのまま使用</span></li>
                </ul>
            </div>
        </div>

        <h3>データベース設計（4つのテーブル）</h3>
        <table>
            <tr>
                <th>テーブル名</th>
                <th>何を保管する？</th>
            </tr>
            <tr>
                <td><strong>profiles</strong> <span class="term-explain">（プロファイル = ユーザー情報）</span></td>
                <td>ユーザーの情報（メールアドレス、権限など）</td>
            </tr>
            <tr>
                <td><strong>companies</strong> <span class="term-explain">（取引先企業）</span></td>
                <td>取引先の情報 + テンプレートExcel（最新版のみ保持）</td>
            </tr>
            <tr>
                <td><strong>processed_files</strong> <span class="term-explain">（処理済みファイル）</span></td>
                <td>処理済みのファイル（編集したExcel・生成した注文書PDF・検収書PDF）</td>
            </tr>
            <tr>
                <td><strong>process_logs</strong> <span class="term-explain">（処理ログ = 記録）</span></td>
                <td>処理の記録（成功したか、エラーが出たか、詳細メッセージ）</td>
            </tr>
        </table>

        <h3>処理フロー（7つのステップ）</h3>
        <div class="step-list">
            <ol>
                <li><strong>PDFアップロード</strong><br>見積書・請求書・注文請書・納品書の4つのファイルをアップロード</li>
                <li><strong>取引先自動判別</strong><br>PDFの中身を読み取って、どの取引先のものかを自動で判断</li>
                <li><strong>事前チェック</strong><br>PDFが正しい形式か、データに問題がないか、金額が合っているかを確認</li>
                <li><strong>前回Excelの取得</strong><br>
                    - 初回: ユーザーが手動でExcelをアップロード → データベースに保存<br>
                    - 2回目以降: 前回処理したExcelをデータベースから自動で取得
                </li>
                <li><strong>Excel自動編集</strong><br>処理ルールに従って、PDFのデータをExcelに転記 <span class="term-explain">（書き写し）</span>（計算式は保持 <span class="term-explain">= SUM関数などを壊さない</span>）</li>
                <li><strong>PDF生成</strong><br>編集したExcelから、注文書PDFと検収書PDFを作成</li>
                <li><strong>データベース保存 + ダウンロード提供</strong><br>編集したExcelと生成したPDFをデータベースに保存し、ユーザーがダウンロードできるようにする</li>
            </ol>
        </div>

        <div class="cost-highlight">
            月額費用: $0
            <div class="sub-text">
                AWS Amplify + Lambda + Supabase（全て無料枠 <span class="term-explain">= 一定量まで無料</span> 内で運用可能）
            </div>
        </div>

        <h2>⏱️ 開発スケジュール見積もり</h2>

        <h3>Phase別の作業時間</h3>
        <table>
            <tr>
                <th>Phase</th>
                <th>作業内容</th>
                <th>AI作業時間</th>
                <th>あなたの作業時間</th>
                <th>合計時間</th>
            </tr>
            <tr class="completed">
                <td>Phase 1</td>
                <td>要件定義</td>
                <td>3時間</td>
                <td>3時間</td>
                <td>✅ 6時間（実績）</td>
            </tr>
            <tr>
                <td>Phase 2</td>
                <td>Git/GitHub管理 <span class="term-explain">（バージョン管理ツール）</span></td>
                <td>0.5時間</td>
                <td>0.5時間</td>
                <td>1時間</td>
            </tr>
            <tr>
                <td>Phase 3</td>
                <td>フロントエンド基盤 <span class="term-explain">（画面の土台作り）</span></td>
                <td>1時間</td>
                <td>0.5時間</td>
                <td>1.5時間</td>
            </tr>
            <tr>
                <td>Phase 4</td>
                <td>ページ実装 <span class="term-explain">（画面を実際に作る）</span></td>
                <td>6-8時間</td>
                <td>2-3時間</td>
                <td>8-11時間</td>
            </tr>
            <tr>
                <td>Phase 5</td>
                <td>環境構築 <span class="term-explain">（開発に必要なツールのセットアップ）</span></td>
                <td>0.5時間</td>
                <td>1時間</td>
                <td>1.5時間</td>
            </tr>
            <tr>
                <td>Phase 6</td>
                <td>バックエンド計画 <span class="term-explain">（裏側処理の設計）</span></td>
                <td>1時間</td>
                <td>0.5時間</td>
                <td>1.5時間</td>
            </tr>
            <tr>
                <td>Phase 7</td>
                <td>バックエンド実装 <span class="term-explain">（裏側処理を実際に作る）</span></td>
                <td>8-10時間</td>
                <td>2-3時間</td>
                <td>10-13時間</td>
            </tr>
            <tr>
                <td>Phase 8</td>
                <td>API統合 <span class="term-explain">（画面と裏側をつなぐ）</span></td>
                <td>3-4時間</td>
                <td>1-2時間</td>
                <td>4-6時間</td>
            </tr>
            <tr>
                <td>Phase 9</td>
                <td>E2Eテスト <span class="term-explain">（システム全体の動作確認）</span></td>
                <td>2-3時間</td>
                <td>1時間</td>
                <td>3-4時間</td>
            </tr>
            <tr>
                <td>Phase 10</td>
                <td>デプロイメント <span class="term-explain">（インターネットに公開）</span></td>
                <td>2-3時間</td>
                <td>2-3時間</td>
                <td>4-6時間</td>
            </tr>
            <tr style="background: #ecf0f1; font-weight: bold;">
                <td colspan="4">合計</td>
                <td>41-55時間</td>
            </tr>
        </table>

        <div class="summary-box">
            <h3>📅 完成目標（平日1日4時間作業の場合）</h3>
            <p><strong>所要日数:</strong> 10〜14日（平日ベース）</p>
            <p><strong>カレンダー換算:</strong> 約2.5〜3週間</p>
            <p><strong>現実的な目標:</strong> 3週間で完成</p>
        </div>

        <h2>🔑 重要な決定事項</h2>

        <h3>P-002（PDF処理実行ページ）の詳細</h3>
        <ul>
            <li>4つのPDF統合アップロード（ドラッグ&ドロップ <span class="term-explain">= マウスでファイルを掴んで放り込む</span> 対応）</li>
            <li>自動判別（取引先特定）→ 2列表示（見積書・請求書 / 注文請書・納品書）</li>
            <li>個別差し替え可能（1つだけファイルを変更できる）</li>
            <li>初回のみExcelをアップロード、2回目以降は前回Excelを自動取得</li>
            <li>7つの画面状態に対応（初期、アップロード中、判別中、初回処理可能、2回目以降処理可能、処理中、完了）</li>
        </ul>

        <h3>P-004（ユーザー管理ページ）の保護機能</h3>
        <ul>
            <li><strong>自分自身の保護:</strong> 自分のアカウントの削除・権限変更ボタンをグレーアウト <span class="term-explain">（灰色にして押せなくする）</span></li>
            <li><strong>最終管理者の保護:</strong> 管理者が1人のみの場合、その管理者の削除・降格ボタンをグレーアウト</li>
            <li>分かりやすいメッセージ表示: 「💡 管理者が1人のため削除/変更できません」</li>
        </ul>

        <h3>P-005（取引先設定ページ）の処理ルール</h3>
        <ul>
            <li>Phase 1（MVP <span class="term-explain">= 最小限の機能で動く製品</span> 版）: 開発者がプログラムを修正して対応</li>
            <li>Phase 2（将来）: 設定ファイルで管理する方式に変更</li>
            <li>Phase 3（将来）: 画面上で設定できるGUI <span class="term-explain">（マウスで操作できる画面）</span> 方式に変更</li>
            <li>初期段階では、処理ルールは読み取り専用で表示のみ（編集はできない）</li>
        </ul>

        <h3>データベース設計の重要決定</h3>
        <ul>
            <li><strong>テンプレートExcel:</strong> companiesテーブルに直接保存（履歴なし、最新版のみ保持）</li>
            <li><strong>処理用Excel:</strong> processed_filesテーブルに毎回保存（履歴あり、過去のファイルも保持）</li>
            <li><strong>ファイル保存方式:</strong> BYTEA型 <span class="term-explain">（バイナリデータ型 = ファイルをそのまま保存）</span> でデータベース内に保存（URLリンクでの直接アクセス不可、ログイン後にのみダウンロード可能でセキュア <span class="term-explain">= 安全</span>）</li>
        </ul>

        <h3>技術スタック決定の経緯</h3>
        <ul>
            <li><strong>デプロイ先:</strong> AWS（ユーザー要望に基づく）</li>
            <li><strong>無料構成:</strong> AWS Amplify + Lambda Docker Image <span class="term-explain">（Dockerというコンテナ技術を使う）</span> + Supabase で月額$0を実現</li>
            <li><strong>コールドスタート:</strong> 5〜10秒 <span class="term-explain">（しばらく使っていない機能を起動する時の待ち時間）</span>（月次処理なので影響は軽微）</li>
            <li><strong>LibreOffice:</strong> Lambda Docker Image（最大10GB）で実行可能を確認</li>
            <li><strong>ローカル開発:</strong> Phase 1-9はローカル環境 <span class="term-explain">（自分のパソコン上）</span> で完結、Phase 10でのみAWSを使用</li>
        </ul>

        <h2>📝 微調整・修正履歴</h2>

        <div class="step-list">
            <ul>
                <li><strong>月間工数 <span class="term-explain">（作業時間）</span> 削減の表現:</strong> 「取引先2社で月20分程度」→「取引先2社で月20分程度削減」に修正（より明確に）</li>
                <li><strong>PDFの用途:</strong> 請求書のみ「データ抽出元・検証」→ 全PDF「データ抽出元」に統一</li>
                <li><strong>ファイル保護の表現:</strong> 「URLで直接アクセス不可、認証済みユーザーのみ」→「URLリンクでの直接アクセス不可、ログイン後にのみダウンロード可能」に変更（より分かりやすく）</li>
                <li><strong>ポート番号 <span class="term-explain">（コンピューターの扉番号）</span>:</strong> localhost:5173、localhost:3000に「(例)」を追加（環境によって変わる可能性を示す）</li>
                <li><strong>Excel構造:</strong> 2ファイル（注文書・検収書）→ 1ファイル2シート構造に訂正（実際の運用に合わせて修正）</li>
            </ul>
        </div>

        <h2>💡 重要な気づき・質疑応答</h2>

        <h3>コールドスタートについて</h3>
        <p>Lambda関数 <span class="term-explain">（AWS Lambdaで実行するプログラム）</span> が初めて起動する際の5〜10秒の待ち時間のこと。月次処理は月1回実行なので毎回初回起動となりますが、処理全体が数分かかるため、この待ち時間は誤差範囲内です。</p>
        <div class="info-box">
            <strong>例え話:</strong> 久しぶりに車のエンジンをかける時、少しウォームアップ時間がかかるイメージです。でも、目的地まで1時間かかる旅なら、最初の10秒のウォームアップはほとんど気になりませんよね。
        </div>

        <h3>ローカル開発について</h3>
        <p>Phase 1-9まではローカル環境（自分のパソコン上）で完全に開発・テスト可能です。AWS Amplify・Lambdaは最後のデプロイ時（Phase 10）のみ必要になります。</p>
        <div class="info-box">
            <strong>例え話:</strong> 料理を作る時、最初は自分の家のキッチンで試作します。完成したら、初めてレストランのキッチンに持っていく感じです。
        </div>

        <h3>テンプレートExcelと処理用Excelの違い</h3>
        <ul>
            <li><strong>テンプレートExcel:</strong> P-005で管理、初回処理時に使用、履歴なし（最新版だけ保存）</li>
            <li><strong>処理用Excel:</strong> 毎回更新されるもの、履歴あり（過去の処理結果も全部保存）、2回目以降は前回分を自動取得</li>
        </ul>
        <div class="info-box">
            <strong>例え話:</strong> テンプレートExcelは「レシピ本」、処理用Excelは「実際に作った料理の記録」です。レシピ本は最新版だけあればOKですが、料理の記録は毎回残しておきたいですよね。
        </div>

        <h3>Phase 1が6時間かかった理由</h3>
        <p>要件定義は対話・思考・判断が多く、時間がかかるフェーズです。Phase 2以降は決まった要件を実装する作業フェーズなので、より速く進みます。</p>
        <div class="info-box">
            <strong>例え話:</strong> 家を建てる時、設計図を描く段階（Phase 1）は色々と考えて時間がかかりますが、設計図ができてしまえば、実際の建築（Phase 2以降）は計画通りにサクサク進みます。
        </div>

        <h3>モックアップについて</h3>
        <p>Phase 4（ページ実装）で作成します。「いきなり実装（推奨）」か、「モックアップ <span class="term-explain">（見た目だけの試作品）</span> 先行」かは、Phase 4開始時に判断可能です。</p>
        <div class="info-box">
            <strong>モックアップとは:</strong> 実際に動くシステムではなく、「見た目だけの試作品」。家具屋さんで見る「展示用の部屋」のようなものです。
        </div>

        <div class="next-action">
            <h3>🚀 次のアクション</h3>
            <p><strong>Phase 2: Git/GitHub管理</strong> へ進む</p>
            <p style="margin-top: 15px; font-size: 1.05em;">
                GitHubリポジトリ <span class="term-explain">（プログラムを保管する場所）</span> を作成し、プロジェクトの開発環境を準備します。<br>
                <strong>所要時間:</strong> 約1時間
            </p>
        </div>

        <div style="text-align: center; margin-top: 50px; padding-top: 30px; border-top: 3px solid #ecf0f1; color: #95a5a6;">
            <p><strong>Phase 1 完了日:</strong> 2025-10-07</p>
            <p><strong>作成者:</strong> BlueLamp要件定義エンジニア（レコンX）</p>
            <p style="margin-top: 20px; font-size: 1.3em; color: #27ae60;">🎉 お疲れさまでした！Phase 1完了です 🎉</p>
        </div>
    </div>
</body>
</html>